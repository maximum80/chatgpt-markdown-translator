# chatgpt-markdown-translator

このスクリプトは、Google Apps Scriptを使って、Googleドライブ上のMarkdownファイルを日本語に翻訳します。翻訳には、OpenAIのGPT-3.5を使用しています。

## 必要なもの
このスクリプトを使用するためには、以下が必要です。

- Googleアカウント
- Googleドライブ内に翻訳したいMarkdownファイルがあるフォルダのID
- Googleドライブ内に翻訳したファイルを保存するためのフォルダのID
- OpenAI APIキー

## 使い方
### 1. Googleドライブにフォルダを作成する
翻訳したいMarkdownファイルがあるフォルダと、翻訳されたファイルを保存するためのフォルダをそれぞれ作成します。これらのフォルダのIDを取得しておきます。

### 2. Google APIとOpenAI APIのキーを取得する
このスクリプトを使用するには、Google APIとOpenAI APIのキーが必要です。

#### Google APIのキーを取得する方法
1. [Google Cloud Console](https://console.cloud.google.com/)にアクセスします。
2. 左上のメニューから、「APIとサービス」 → 「ダッシュボード」を選択します。
3. 「＋APIとサービス」を選択し、「Google Drive API」を検索して有効化します。
4. 左上のメニューから、「APIとサービス」 → 「認証情報」を選択します。
5. 「＋認証情報を作成」をクリックして、「サービスアカウント」を選択します。
6. 必要事項を記入し、キーの作成を行います。
7. 作成したキーをダウンロードし、キーファイルのパスを控えておきます。

#### OpenAI APIのキーを取得する方法
1. [OpenAIのダッシュボード](https://beta.openai.com/dashboard/)にアクセスし、ログインします。
2. 「Settings」からAPIキーを取得します。

### 3. スクリプトを設定する
1. Googleドライブにアクセスし、新しいGoogle Apps Scriptプロジェクトを作成します。
2. `translate_using_chatgpt.gs`の内容をコピーして、新しいスクリプトファイルに貼り付けます。
3. `inputFolderId`と`outputFolderId`を、それぞれ翻訳元のフォルダIDと翻訳先のフォルダIDに置き換えます。IDは、Googleドライブでフォルダを開いたときのURLの末尾にあるものです。例えば、`https://drive.google.com/drive/folders/xxxxxxxxxxxxxxxxxxxxxxxxx`の`xxxxxxxxxxxxxxxxxxxxxxxxx`がIDになります。
4. Google APIとOpenAI APIのキーを、それぞれ取得したキーに置き換えます。
5. スクリプトファイルを保存し、ファイル名を適切に設定します。

### 4. スクリプトを実行する
1. スクリプトファイルを開きます。
2. 編集可能なプロンプト領域が表示されるため、`RUN`ボタンをクリックして、スクリプトを実行します。
3. Googleドライブ内の指定したフォルダ内にあるMarkdownファイルが自動的に翻訳され、翻訳されたファイルが指定したフォルダに保存されます。

## 編集可能なプロンプト領域
以下の編集可能なプロンプト領域です。ここで、必要に応じて設定を変更することができます。
- `content`: 翻訳するテキストの内容です。デフォルトでは以下のプロンプトが設定されています。
  - "以下のマークダウンで記載された英文章を日本語に翻訳してください。翻訳された出力内容は、Markdown形式を維持し、コードブロックや専門用語はそのままの形で残すようにしてください。"
- `maxTokens`: 翻訳するテキストの最大トークン数です。OpenAIのAPI制限により、1回の翻訳で処理できる最大トークン数は2048ですが、与える入力値や出力の値を鑑みて、600で設定しています。
- `temperature`: 翻訳の生成精度を調整するためのパラメーターで、値が高いほど生成される文章が多様になります。今回は0.9で設定されています。

設定を変更した場合は、変更後に`RUN`ボタンをクリックして、再度スクリプトを実行してください。

## 注意事項
- このスクリプトは、Google Apps Scriptを使用して実行する必要があります。
- このスクリプトは、OpenAIのAPIキーが必要です。
- このスクリプトは、Googleドライブのフォルダ内のサブフォルダにも再帰的にアクセスします。
- このスクリプトは、翻訳されたファイルのタイトルが元のファイルのタイトルと完全に一致する場合に、既存の翻訳済みファイルを使用します。このため、翻訳前のファイルを手動で変更すると、スクリプトは新しいファイルとして翻訳を実行します。
- このスクリプトは、Markdownファイルの内容を翻訳しますが、ファイルのメタデータ（例：ファイル名、タグなど）は翻訳しません。
- このスクリプトは、OpenAI APIに依存しているため、APIの変更によりスクリプトが正しく動作しなくなる可能性があります。

